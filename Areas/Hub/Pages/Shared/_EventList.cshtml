@using LetsGame.Data.Models;
@using LetsGame.Areas.Identity.Data;
@using LetsGame.Areas.Hub.Models;
@using LetsGame.Areas.Hub.Models.Controls;
@using System.Globalization;
@model EventListModel

<!--A partial for rendering a list of events consitantly-->
<div class="row py-3">
	<div class="col table-responsive">
		<table class="table table-striped table-bordered align-middle">
			<thead>
				<tr class="align-middle">
					@*For controlls drop down*@
					<th scope="col">
				
					</th>
					<th scope="col">
						Event
					</th>
					<th scope="col">
						Location
					</th>
					<th scope="col">
						When
					</th>
					@*Pin Column*@
					<th scope="col" class="text-center">
						<partial name="Controls/_UpdateEvent" model="@new EventButtonModel(null, Model.CurrentPage)" />
					</th>
				</tr>
			</thead>
			<tbody>
				@foreach (LetsGame_UserEvent ue in Model.UserEvents) {
					<tr>
						<th scope="row" class="text-center">
							<partial name="Controls/_PinEvent" model="@new PinEventButtonModel(ue.IsPinned, ue.EventID, Model.CurrentPage)" />
						</th>
						<td>
							<a asp-page="/Events/Index" asp-route-eventID=@ue.EventID>@ue.Event.EventName</a>
						</td>
						<td>
							@ue.Event.Location
						</td>
						<td>
							@ue.Event.EventDateTime
						</td>
						<td class="text-center">
							@if (ue.IsCreator) {
								<partial name="Controls/_EventDropdownControls" model="@new EventButtonModel(ue.EventID, Model.CurrentPage)" />
							}
						</td>
					</tr>
				}
			</tbody>
		</table>
	</div>
</div>

@*<div class="row mx-0">
	<div class="col flex-column">
		<div class="d-flex row border border-dark bg-light shadow-sm text-dark">
			<div class="col-8 d-flex">
				<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
					<div>Event</div>
				</div>
				<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
					<div>Location</div>
				</div>
				<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
					<div>When</div>
				</div>
			</div>
			<div class="col-4 d-flex flex-row-reverse">
				<partial name="Controls/_UpdateEvent" model="@new ControlModel_EventData(null, Model.CurrentPage)" />
			</div>
		</div>
		@foreach (LetsGame_UserEvent ue in Model.UserEvents) {
			<div class="d-flex row border-end border-start border-bottom border-primary">
				<div class="col-8 d-flex flex-row">
					@if(ue.IsCreator){
						<partial name="Controls/_EventDropdownControls" model="@new ControlModel_EventData(ue.EventID, Model.CurrentPage)" />
					}
					<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
						<a asp-page="/Events/Index" asp-route-eventID=@ue.EventID>@ue.Event.EventName</a>
					</div>
					<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
						<div>
							@ue.Event.Location
						</div>
					</div>
					<div class="p-2 d-flex align-items-center" style="flex:1 0 15%">
						<div>
							@ue.Event.EventDateTime
						</div>
					</div>
				</div>
				<div class="col-4 d-flex flex-row-reverse">
					<partial name="Controls/_PinEvent" model="@new ControlModel_PinEvent(ue.IsPinned, ue.EventID, Model.CurrentPage)"/>
				</div>
			</div>
		}
	</div>
</div>
*@